---
layout: post
title: sql笔记
date: 2018-12-27 
tags: 经验  
---
  
> 实际操作过程中的积累

# 1 常用函数
```
DATE_SUB(CURDATE(), INTERVAL 7 DAY)     # 取当前日期之前7天的日期
DATE_FORMAT(update_time,'%Y-%m-%d')     # 将update_time时间按照%Y-%m-%d格式化
to_days(now())                          # 将当前时间转换成日为单位的时间
```
# 2 MySQL一些操作
## 基础操作
```
show tables;        # 显示当前db的所有表
desc xxx;           # 显示xxxtable的结构信息
```
## 按照一个key一行显示  \G
```
select语句后面加 \G，可以将语句按照每一个key单行显示
```
## group分组组合
```
group_contact和group by组合使用，能把一个大集合，按照一定分组，且把未在分组key里面的，按照group_contact用逗号分隔连接起来
```  
|id|name|
|---|---|
|1|test1|
|1|test2|
|2|test3|
|2|test4|
|2|test5|
经过group_contact之后
```
select id,group_concat(name) from aa group by id
```
|id|group_concat(name)|
|---|---|
|1|test1,test2|
|2|test3,test4,test5|
## join on操作，默认是inner join on，求交集
```
select * from a join b on a.id = b.id
等价于
select * from a inner join b on a.id = b.id
```
# 3 PostgreSQL一些操作
## 基础操作
```
\d              # 列出当前db的所有表
\d xxx          # 列出xxxtable的结构信息
\?              # 列出所有命令
```